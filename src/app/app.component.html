<div class="top-bar">
  <div class="row">
    <div class="top-bar-left">
      <ul class="menu">
        <li class="menu-text">BusinessContacts</li>  
      </ul>  
    </div> 
    <div class="top-bar-right">
      
    </div> 
  </div>  
</div>
<br>

<div *ngIf = "appState == 'default' " class="row">
  <div class="large-6 columns float-left form">
    <button class="button" (click) ="changeState('add')" >Add Business</button>
  </div>

  <div class="large-6 columns form float-right">
    <label> Filter Category
      <select (change)= "filterCategory(filteredCategory.value)" #filteredCategory>
        <option value="0">Select</option>
        <option *ngFor = "let category of categories" value="{{category.name}}">
          {{category.name}}
        </option>
      </select>
    </label>
  </div>
</div>
<!-- EDIT FORM -->

<div *ngIf = "appState == 'edit'">
  <div class="large-12 columns">
    <h3>EDIT BUSINESS</h3>
    <form (submit)= "updateBusiness()">
      <div class="row">
        <div class="large-6 columns form float-left">
          <label>Company
            <input type="text" [(ngModel)] = "activeCompany" name="company" placeholder="Company Name" #company>
          </label>
          
        </div>
        <div class="large-6 columns form float-right">
          <label>Category
            <select [(ngModel)] = "activeCategory" name="category">
              <option value="0">Select</option>
              <option *ngFor = "let category of categories" value="{{category.name}}">
                {{category.name}}
              </option>
            </select>
          </label>
        </div>
      </div>

      <div class="row">
        <div class="large-6 columns form float-left">
          <label>Years in Business
            <input type="text" [(ngModel)] = "activeYearsInBusiness" name="years_in_business"  placeholder="Years in Business">
          </label>
        </div>

        <div class="large-6 columns form float-right">
          <label>Description
            <input type="text" placeholder="Description" [(ngModel)] = "activeDescription" name="description">
          </label>
        </div>
      </div>

       <div class="row">
        <div class="large-6 columns form float-left">
          <label>Phone
            <input type="text" placeholder="Phone" [(ngModel)] = "activePhone" name="phone">
          </label>
        </div>

        <div class="large-6 columns form float-right">
          <label>Email
            <input type="text" placeholder="Email" [(ngModel)] = "activeEmail" name="email">
          </label>
        </div>
      </div>

      <div class="row">
        <div class="large-6 columns form float-left">
          <label>Street Address
            <input type="text" placeholder="Street Address" [(ngModel)] = "activeStreetAddress" name="street_address">
          </label>
        </div>

        <div class="large-6 columns form float-right">
          <label>City
            <input type="text" placeholder="City" [(ngModel)] = "activeCity" name="city">
          </label>
        </div>
      </div>

      <div class="row">
        <div class="large-6 columns form float-left">
          <label>State
            <input type="text" placeholder="State" [(ngModel)] = "activeState" name="state">
          </label>
        </div>

        <div class="large-6 columns form float-right">
          <label>Zipcode
            <input type="text" placeholder="Zipcode" [(ngModel)] = "activeZipcode" name="zipcode">
          </label>
        </div>
      </div>


      <div class="row">
        <div class="large-12">
          <input type="submit" class="button" value="Submit">
        </div>
      </div>
      

    </form>
  </div>
</div>


<!-- ADD BUSINESS-->

<div *ngIf = "appState == 'add'">
  <div class="large-12 columns">
    <h3>ADD BUSINESS</h3>
    <form (submit)= "addBusiness(
      company.value,
      category.value,
      years_in_business.value,
      description.value,
      phone.value,
      email.value,
      street_address.value,
      city.value,
      state.value,
      zipcode.value
    )">
      <div class="row">
        <div class="large-6 columns form float-left">
          <label>Company
            <input type="text" placeholder="Company Name" #company>
          </label>
          
        </div>
        <div class="large-6 columns form float-right">
          <label>Category
            <select #category>
              <option value="0">Select</option>
              <option *ngFor = "let category of categories" value="{{category.name}}">
                {{category.name}}
              </option>
            </select>
          </label>
        </div>
      </div>

      <div class="row">
        <div class="large-6 columns form float-left">
          <label>Years in Business
            <input type="text" placeholder="Years in Business" #years_in_business>
          </label>
        </div>

        <div class="large-6 columns form float-right">
          <label>Description
            <input type="text" placeholder="Description" #description>
          </label>
        </div>
      </div>

       <div class="row">
        <div class="large-6 columns form float-left">
          <label>Phone
            <input type="text" placeholder="Phone" #phone>
          </label>
        </div>

        <div class="large-6 columns form float-right">
          <label>Email
            <input type="text" placeholder="Email" #email>
          </label>
        </div>
      </div>

      <div class="row">
        <div class="large-6 columns form float-left">
          <label>Street Address
            <input type="text" placeholder="Street Address" #street_address>
          </label>
        </div>

        <div class="large-6 columns form float-right">
          <label>City
            <input type="text" placeholder="City" #city>
          </label>
        </div>
      </div>

      <div class="row">
        <div class="large-6 columns form float-left">
          <label>State
            <input type="text" placeholder="State" #state>
          </label>
        </div>

        <div class="large-6 columns form float-right">
          <label>Zipcode
            <input type="text" placeholder="Zipcode" #zipcode>
          </label>
        </div>
      </div>


      <div class="row">
        <div class="large-12">
          <input type="submit" class="button" value="Submit">
        </div>
      </div>
      

    </form>
  </div>
</div>



<div *ngIf="appState == 'extend' ">
  <div class="row">
    <div class="large-12 large-1-offset columns">
      <button class="button alert" (click)="changeState('default')">Go back</button>  
    </div>  
  </div>
  <div *ngFor="let business of businesses">
    <div *ngIf="business.$key == activeKey">
      <div class="row">
        <div class="large-3  large-offset-1 float-left " >
          <h3>{{business.company}}</h3>
          <p>Category: {{business.category}}</p>
          <p>Years In Business: {{business.years_in_business}}
          <p>{{business.description}}</p>
        </div>  
        
        <div class="large-5 form float-right " >
          <h4>Contact Info</h4>
          <ul>
            <li>Phone: {{business.phone}}</li>  
            <li>Email: {{business.email}}</li>  
            <li>Street: {{business.street_address}}</li>  
            <li>City: {{business.city}}</li>  
            <li>State: {{business.state}}</li>  
            <li>Zipcode: {{business.zipcode}}</li>  
          </ul>
        </div> 
      </div>  
    </div> 
  </div>
</div>

<div class="row">
  <div class="large-12 columns">
    <div *ngIf="businesses">
        <table>
          <thead>
            <tr>
              <th>Company</th>
              <th>Category</th>
              <th>Phone</th>
              <th></th>  
            </tr>  
          </thead>
          <tbody>
            <tr *ngFor="let business of businesses">
                <td>{{business.company}}</td>
                <td>{{business.category}}</td>
                <td>{{business.phone}}</td>
                <td>
                  <button (click)="changeState('extend', business.$key)" class="button">More</button>
                  <button (click) = "showEdit(business)"class="button secondary">Edit</button>
                  <button (click)= "deleteBusiness(business.$key)" class="button alert">Delete</button>
                </td>
            </tr>
          </tbody>
        </table>
    </div>  
  </div>  
</div>
